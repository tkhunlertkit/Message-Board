<html>
<head>
    {% if title %}
    <title>{{title}}</title>
    {% else %}
    <title>Default Title</title>
    {% endif %}
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
    <script src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.9.0.js"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/knockout/knockout-2.2.1.js"></script>
</head>
<body>

  <div class="body">
  {% with messages = get_flashed_messages() %}
    {% if messages %}
      <ul>
        {% for message in messages %}
        <li>{{ message }}</li>
        {% endfor %}
      </ul>
    {% endif %}
  {% endwith %}
  {% block content %}{% endblock %}
  </div>

  <!-- <ul class="navbar" data-bind="foreach: folders">
    <li data-bind="text: $data, css: {active: $data == $root.chosenFolder()}, click: $root.goToFolder"></li>
  </ul>
  <div class="body" data-bind="foreach: posts">

  <div class="table">

    <table class="left">
      <tr valign="top">
        <td><img src="{{ user.avatar(50) }}"/></td>
        <td>
          <i data-bind="text: nickname"></i> says:<br>
          <span data-bind="text: body"></span><br>
          <i><span style="color: grey" data-bind="text: timestamp"></span></i>
        </td>
      </tr>
    </table>
  </div>
  </div>
  <script type="text/javascript">
    function TasksViewModel() {
      var self = this;
      self.folders = ['Home', 'My profile', 'logout'];
      self.tasksURI = 'http://localhost:5000/api/posts/';
      self.chosenFolder = ko.observable();
      self.chosenFolderData = ko.observable();
      self.posts = ko.observableArray();
      self.chosenFolder("Home");

      self.ajax = function(uri, method, data) {
        var request = {
          url: uri,
          type: method,
          contentType: "application/json",
          accepts: "application/json",
          cache: false,
          dataType: 'json',
          data: JSON.stringify(data),
          beforeSend: function (xhr) {
              xhr.setRequestHeader("Authorization",
                  "Basic " + btoa(self.username + ":" + self.password));
          },
          error: function(jqXHR) {
              console.log("ajax error " + jqXHR.status);
          }
        };
        return $.ajax(request);
        }

      self.ajax(self.tasksURI, 'GET').done(function(data) {
          for (var i = 0; i < data.posts.length; i++) {
              self.posts.push({
                  nickname: ko.observable(data.posts[i].nickname),
                  body: ko.observable(data.posts[i].body),
                  timestamp: ko.observable(data.posts[i].timestamp)
              });
          }
      });
      self.goToFolder = function(folder) {
        self.chosenFolder(folder);
        self.psots(null);
        self.ajax(self.tasksURI, 'GET').done(function(data) {
            for (var i = 0; i < data.posts.length; i++) {
                self.posts.push({
                    nickname: ko.observable(data.posts[i].nickname),
                    body: ko.observable(data.posts[i].body),
                    timestamp: ko.observable(data.posts[i].timestamp)
                });
            }
        });
      };
    }
    ko.applyBindings(new TasksViewModel());
  </script> -->


</body>
</html>
